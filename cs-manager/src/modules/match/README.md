# 比赛模块 (Match Module)

## 设计概览

比赛模块是CS电竞经理的核心功能，模拟CS:GO比赛的各个方面，包括队伍选择、地图选择、战术布置和比赛进行。该模块旨在提供真实、有深度且有趣的比赛体验。

## 组件结构

比赛模块由以下组件构成：

- `MatchModule.jsx`：主入口组件，整合所有子组件
- `MapSelection.jsx`：地图选择组件
- `TacticsSetup.jsx`：战术和角色设置组件
- `MatchSimulation.jsx`：比赛进行和结果展示组件
- `MatchUtils.js`：比赛核心算法和工具函数

## 数值策略与平衡

### 地图影响因素

地图对比赛结果的影响通过以下因素实现：

| 地图 | 狙击手友好度 | 突破手友好度 | 战术复杂度 | CT方倾向性 |
|------|------------|------------|----------|----------|
| Dust2 | 高 (1.2x) | 中 (1.0x) | 低 (0.8x) | 平衡 (1.0x) |
| Mirage | 中 (1.0x) | 高 (1.2x) | 中 (1.0x) | 略T (0.9x) |
| Inferno | 低 (0.8x) | 低 (0.8x) | 高 (1.2x) | 略CT (1.1x) |
| Nuke | 中 (1.0x) | 低 (0.8x) | 高 (1.2x) | 强CT (1.3x) |
| Overpass | 中 (1.0x) | 中 (1.0x) | 高 (1.2x) | 略CT (1.1x) |

### 战术影响因素

不同战术风格会影响选手属性的权重：

| 战术风格 | 瞄准影响 | 意识影响 | 反应影响 | 风险/回报 |
|---------|---------|---------|----------|----------|
| 激进 | 1.3x | 0.8x | 1.2x | 高风险/高回报 |
| 平衡 | 1.0x | 1.0x | 1.0x | 中风险/中回报 |
| 保守 | 0.8x | 1.3x | 0.9x | 低风险/低回报 |

### 角色影响

选手角色分配会影响其属性在比赛中的发挥：

| 角色 | 瞄准 | 意识 | 反应 | 特殊能力 |
|------|------|------|------|----------|
| 主狙 | 1.3x | 1.0x | 1.1x | 关键回合影响力+20% |
| 突破手 | 1.2x | 0.9x | 1.3x | 开局影响力+25% |
| 支援 | 0.9x | 1.3x | 1.0x | 团队整体表现+10% |
| 指挥 | 1.0x | 1.4x | 0.9x | 战术成功率+20% |
| 补枪手 | 1.1x | 1.1x | 1.1x | 团队失误修正+15% |

### 回合计算公式

每回合的胜负由以下因素综合计算：

```
回合分数 = 基础实力 × 地图修正 × 战术修正 × 角色修正 × 随机因素

其中：
- 基础实力 = 队员属性总和
- 地图修正 = 根据地图特性和队伍擅长地图调整
- 战术修正 = 根据选择的战术风格和对手战术的克制关系
- 角色修正 = 根据角色分配的合理性
- 随机因素 = 0.8 到 1.2 之间的随机值
```

### 设施加成

游戏内设施对比赛的影响：

- **训练中心**：提高选手基础属性表现（每级+2%）
- **游戏之家**：提高团队协作和默契度（每级+5%）
- **分析办公室**：
  - 提供对手情报（每级+3%胜率）
  - 对手正面爆发减少（每级-5%）
  - 对手负面表现加强（每级+2.5%）

## 比赛流程

1. **地图选择**：从可用地图池中选择比赛地图
2. **战术布置**：选择T方和CT方战术倾向，分配队员角色
3. **比赛进行**：模拟30回合比赛（可能进入加时赛）
4. **结果分析**：展示比赛结果、选手表现和奖励

## 数据平衡与游戏性

- 强队对弱队的胜率约为70-80%，保留upset的可能性
- 实力相近的队伍，战术和角色分配可以提供5-15%的胜率差异
- 随机因素影响控制在±20%范围内，保证技不如人时仍有机会，但不会过分干扰合理结果 